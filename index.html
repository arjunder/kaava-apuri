<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kaava-apuri</title>

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script"
          async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Kaava-apuri: miten kaava käyttäytyy?</h1>
  <p class="intro">
    Siirrä liukusäätimiä ja katso, miten <strong>arvot muutuvat</strong>.
    Näet suoraan miten eri suureiden kasvu tai pieneneminen vaikuttaa tulokseen –
    sama matematiikka toistuu monissa fysiikan ja kemian kaavoissa, joita tarvitset lääkiksen pääsykokeessa.
  </p>

  <div class="top-bar">
    <div class="tabs">
      <button class="tab-btn active" data-target="physics">Fysiikka</button>
      <button class="tab-btn" data-target="chemistry">Kemia</button>
      <button class="tab-btn" data-target="tasks">Tehtävät</button>
    </div>
    <button class="about-btn" id="about-btn">About / @nollasta_laakikseen</button>
  </div>

  <!-- About-modal -->
  <div class="overlay" id="about-overlay">
    <div class="modal">
      <h2>About</h2>
      <p>
        Tämä Kaava-apuri on tehty helpottamaan kaavojen suureiden muutoksia:
        tarkoitus on hahmottaa, miten arvot käyttäytyvät erilaisilla fysiikan ja kemian kaavoilla.
      </p>
      <p>
        Made by
        <span class="ig-inline">
          <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5"
                  fill="none" stroke="#f97316" stroke-width="1.6"/>
            <circle cx="12" cy="12" r="4.3"
                    fill="none" stroke="#f97316" stroke-width="1.6"/>
            <circle cx="17.3" cy="6.7" r="1.2" fill="#f97316"/>
          </svg>
          <strong>@nollasta_laakikseen</strong>
        </span>
      </p>
      <p>
        <a href="https://www.instagram.com/nollasta_laakikseen"
           target="_blank"
           rel="noopener noreferrer">Avaa Instagram-profiili</a>
      </p>
      <button id="about-close">Sulje</button>
    </div>
  </div>

  <!-- YHTEISET SUHDEKAAVAT -->
  <h2 class="section-title">Yhteiset suhdekaavat (X = y / z)</h2>
  <div class="ratio-wrapper">
    <div class="card">
      <h2>Suhdeluvut: sama matematiikka eri ilmiöissä</h2>

      <label class="mode-label">
        Valitse ilmiö:
        <select id="ratio-mode">
          <option value="density">Tiheys \( \rho = m/V \)</option>
          <option value="conc">Ainemääräpitoisuus \( c = n/V \)</option>
          <option value="speed">Keskinopeus \( v = s/t \)</option>
          <option value="rate">Reaktionopeus \( v = \Delta c/\Delta t \)</option>
        </select>
      </label>

      <div class="formula-symbolic math" id="ratio-symbolic"></div>
      <div class="formula-numeric math" id="ratio-numeric"></div>

      <div class="relationship">
        <strong>Kaikissa näissä X on “jotain per jokin”:</strong>
        massa per tilavuus, ainemäärä per tilavuus, matka per aika,
        konsentraation muutos per aika.  
        Kun <strong>osoittaja kasvaa</strong> (nimittäjä vakio) → X kasvaa.  
        Kun <strong>nimittäjä kasvaa</strong> (osoittaja vakio) → X pienenee.
      </div>

      <div class="slider-row">
        <label id="ratio-num-label">
          Yläosa
          <span class="slider-value" id="ratio-num-val"></span>
        </label>
        <input type="range" id="ratio-num" />
      </div>

      <div class="slider-row">
        <label id="ratio-den-label">
          Alaosa
          <span class="slider-value" id="ratio-den-val"></span>
        </label>
        <input type="range" id="ratio-den" />
      </div>

      <div class="hint" id="ratio-hint"></div>
    </div>
  </div>

  <!-- FYSIIKKA -->
  <div id="physics" class="section active">
    <h2 class="section-title">Fysiikka</h2>
    <div class="grid">
      <!-- Ohmin laki -->
      <div class="card">
        <h2>Ohmin laki</h2>
        <div class="formula-symbolic math">
          \( U = R\,I \)
        </div>
        <div class="formula-numeric math" id="ohm-numeric"></div>
        <div class="relationship">
          <strong>Suora verrannollisuus molempiin:</strong>
          jos kasvatat resistanssia tai virtaa, jännite kasvaa samassa suhteessa.
        </div>

        <div class="slider-row">
          <label>
            R (resistanssi, Ω)
            <span class="slider-value" id="ohm-R-val"></span>
          </label>
          <input type="range" id="ohm-R" min="1" max="200" step="1" value="50">
        </div>

        <div class="slider-row">
          <label>
            I (virta, A)
            <span class="slider-value" id="ohm-I-val"></span>
          </label>
          <input type="range" id="ohm-I" min="0.10" max="5.00" step="0.10" value="1.00">
        </div>

        <div class="hint">
          <strong>Kaksi kertaa isompi R tai I → kaksi kertaa isompi U.</strong>
        </div>
      </div>

      <!-- Liike-energia -->
      <div class="card">
        <h2>Liike-energia</h2>
        <div class="formula-symbolic math">
          \( E_k = \dfrac{1}{2} m v^2 \)
        </div>
        <div class="formula-numeric math" id="ke-numeric"></div>
        <div class="relationship">
          <strong>Energia on lineaarinen massassa, mutta neliöllinen nopeudessa:</strong>
          pieni nopeuden kasvu voi kasvattaa energiaa paljon.
        </div>

        <div class="slider-row">
          <label>
            m (kg)
            <span class="slider-value" id="ke-m-val"></span>
          </label>
          <input type="range" id="ke-m" min="50" max="2000" step="50" value="1000">
        </div>

        <div class="slider-row">
          <label>
            v (m/s)
            <span class="slider-value" id="ke-v-val"></span>
          </label>
          <input type="range" id="ke-v" min="0" max="40" step="1" value="20">
        </div>

        <div class="hint">
          <strong>Nopeuden kaksinkertaistaminen nelinkertaistaa \(E_k\):n.</strong>
        </div>
      </div>

      <!-- Harmoninen värähtelijä -->
      <div class="card">
        <h2>Harmonisen värähtelijän jaksonaika</h2>
        <div class="formula-symbolic math">
          \( T = 2\pi \sqrt{\dfrac{m}{k}} \)
        </div>
        <div class="formula-numeric math" id="osc-numeric"></div>
        <div class="relationship">
          <strong>Jaksonaika kasvaa neliöjuuren takia vain “pehmeästi” massan kasvaessa,</strong>
          ja pienenee kun jousivakio \(k\) kasvaa.
        </div>

        <div class="slider-row">
          <label>
            m (kg)
            <span class="slider-value" id="osc-m-val"></span>
          </label>
          <input type="range" id="osc-m" min="0.1" max="5.0" step="0.1" value="1.0">
        </div>

        <div class="slider-row">
          <label>
            k (N/m)
            <span class="slider-value" id="osc-k-val"></span>
          </label>
          <input type="range" id="osc-k" min="1" max="100" step="1" value="20">
        </div>

        <div class="hint">
          <strong>Jos m nelinkertaistuu, T vain kaksinkertaistuu</strong> (\(\sqrt{4} = 2\)).
        </div>
      </div>

      <!-- Gravitaatiovoima -->
      <div class="card">
        <h2>Gravitaatiovoima kahden kappaleen välillä</h2>
        <div class="formula-symbolic math">
          \( F = G \dfrac{m_1 m_2}{r^2} \)
        </div>
        <div class="formula-numeric math" id="grav-numeric"></div>
        <div class="relationship">
          <strong>Voima kasvaa massojen tulon mukana, mutta pienenee etäisyyden neliössä:</strong>
          kun $r$ kaksinkertaistuu, voima putoaa neljäsosaan.
        </div>

        <div class="slider-row">
          <label>
            \(m_1\) (kg)
            <span class="slider-value" id="grav-m1-val"></span>
          </label>
          <input type="range" id="grav-m1" min="1" max="10000" step="100" value="1000">
        </div>

        <div class="slider-row">
          <label>
            \(m_2\) (kg)
            <span class="slider-value" id="grav-m2-val"></span>
          </label>
          <input type="range" id="grav-m2" min="1" max="10000" step="100" value="1000">
        </div>

        <div class="slider-row">
          <label>
            r (m)
            <span class="slider-value" id="grav-r-val"></span>
          </label>
          <input type="range" id="grav-r" min="0.5" max="50" step="0.5" value="10">
        </div>

        <div class="hint">
          <strong>Gravitaatio on heikko voima pienillä massoilla ja etäisyyksillä.</strong>
        </div>
      </div>

      <!-- Lämpöenergia -->
      <div class="card">
        <h2>Lämpöenergia lämmityksessä</h2>
        <div class="formula-symbolic math">
          \( Q = c\, m\, \Delta T \)
        </div>
        <div class="formula-numeric math" id="heat-numeric"></div>
        <div class="relationship">
          <strong>Tarvittava lämpöenergia kasvaa suoraan kolmessa asiassa:</strong>
          ominaislämpökapasiteetissa, massassa ja lämpötilan muutoksessa.
        </div>

        <div class="slider-row">
          <label>
            c (J/(kg·K))
            <span class="slider-value" id="heat-c-val"></span>
          </label>
          <input type="range" id="heat-c" min="2000" max="5000" step="100" value="4200">
        </div>

        <div class="slider-row">
          <label>
            m (kg)
            <span class="slider-value" id="heat-m-val"></span>
          </label>
          <input type="range" id="heat-m" min="0.10" max="5.00" step="0.10" value="1.00">
        </div>

        <div class="slider-row">
          <label>
            ΔT (K)
            <span class="slider-value" id="heat-dT-val"></span>
          </label>
          <input type="range" id="heat-dT" min="0" max="80" step="2" value="20">
        </div>

        <div class="hint">
          <strong>Isompi vesimäärä ja suurempi lämpötilan nosto vaativat paljon enemmän energiaa.</strong>
        </div>
      </div>
    </div>
  </div>

  <!-- KEMIA -->
  <div id="chemistry" class="section">
    <h2 class="section-title">Kemia</h2>
    <div class="grid">
      <!-- Ideaalikaasu + erikoistapaukset -->
      <div class="card">
        <h2>Ideaalikaasun tilanyhtälö ja erikoistapaukset</h2>

        <label class="mode-label">
          Valitse malli:
          <select id="gas-mode">
            <option value="ideal">Tilanyhtälö \(pV = nRT\)</option>
            <option value="boyle">Boylen laki (T vakio)</option>
            <option value="charles">Charlesin laki (p vakio)</option>
            <option value="gay">Gay-Lussacin laki (V vakio)</option>
          </select>
        </label>

        <div class="formula-symbolic math" id="gas-symbolic"></div>
        <div class="formula-numeric math" id="gas-numeric"></div>

        <div class="relationship" id="gas-relationship"></div>

        <div class="slider-row">
          <label id="gas-l1-label">
            Suure 1
            <span class="slider-value" id="gas-l1-val"></span>
          </label>
          <input type="range" id="gas-l1">
        </div>

        <div class="slider-row">
          <label id="gas-l2-label">
            Suure 2
            <span class="slider-value" id="gas-l2-val"></span>
          </label>
          <input type="range" id="gas-l2">
        </div>

        <div class="slider-row" id="gas-l3-row">
          <label id="gas-l3-label">
            Suure 3
            <span class="slider-value" id="gas-l3-val"></span>
          </label>
          <input type="range" id="gas-l3">
        </div>

        <div class="hint" id="gas-hint"></div>
      </div>

      <!-- Entalpia -->
      <div class="card">
        <h2>Reaktion entalpia</h2>
        <div class="formula-symbolic math">
          \( \Delta H = n\,\Delta H_\mathrm{m} \)
        </div>
        <div class="formula-numeric math" id="enthalpy-numeric"></div>
        <div class="relationship">
          <strong>Entalpiamuutos kasvaa suorassa suhteessa reagoivan ainemäärän kanssa.</strong>
        </div>

        <div class="slider-row">
          <label>
            n (mol)
            <span class="slider-value" id="enth-n-val"></span>
          </label>
          <input type="range" id="enth-n" min="0.10" max="5.00" step="0.10" value="1.00">
        </div>

        <div class="slider-row">
          <label>
            ΔH<sub>m</sub> (kJ/mol)
            <span class="slider-value" id="enth-Hm-val"></span>
          </label>
          <input type="range" id="enth-Hm" min="-400" max="400" step="10" value="-200">
        </div>

        <div class="hint">
          <strong>Negatiivinen ΔH tarkoittaa eksotermistä prosessia, positiivinen endotermistä.</strong>
        </div>
      </div>

      <!-- Tasapainovakio -->
      <div class="card">
        <h2>Tasapainovakio ja reaktioosamäärä</h2>
        <div class="formula-symbolic math">
          Reaktio: \( \text{A} \rightleftharpoons \text{B} \)  
          \( K = \dfrac{[\text{B}]_\text{systeemi}}{[\text{A}]_\text{systeemi}} \)
        </div>
        <div class="formula-numeric math" id="eq-numeric"></div>
        <div class="relationship">
          <strong>Reaktioosamäärä \(Q\) kuvaa systeemiä juuri nyt.</strong>
          Jos \(Q < K\), systeemi pyrkii kohti tuotteita (oikealle).  
          Jos \(Q > K\), systeemi pyrkii kohti lähtöaineita (vasemmalle).
        </div>

        <div class="slider-row">
          <label>
            [A] (mol/L)
            <span class="slider-value" id="eq-A-val"></span>
          </label>
          <input type="range" id="eq-A" min="0.10" max="2.00" step="0.05" value="1.00">
        </div>

        <div class="slider-row">
          <label>
            [B] (mol/L)
            <span class="slider-value" id="eq-B-val"></span>
          </label>
          <input type="range" id="eq-B" min="0.10" max="2.00" step="0.05" value="1.00">
        </div>

        <div class="hint">
          <strong>Tämä on sama X = y/z -rakenne:</strong>
          \(Q = [\text{B}]/[\text{A}]\).
        </div>

        <div class="eq-status" id="eq-status"></div>
      </div>

      <!-- pH happo/emäs -->
      <div class="card">
        <h2>pH vahvalla hapolla ja emäksellä</h2>

        <label class="mode-label">
          Valitse:
          <select id="ph-mode">
            <option value="acid">Vahva happo (esim. HCl)</option>
            <option value="base">Vahva emäs (esim. NaOH)</option>
          </select>
        </label>

        <div class="formula-symbolic math" id="ph-symbolic"></div>
        <div class="formula-numeric math" id="ph-numeric"></div>

        <div class="relationship" id="ph-relationship"></div>

        <div class="slider-row">
          <label id="ph-exp-label">
            Eksponentti
            <span class="slider-value" id="ph-exp-val"></span>
          </label>
          <input type="range" id="ph-exp" min="0" max="14" step="0.1" value="1.0">
        </div>

        <div class="hint" id="ph-hint"></div>
      </div>
    </div>
  </div>

  <!-- TEHTÄVÄT -->
  <div id="tasks" class="section">
    <h2 class="section-title">Tehtävätila – monivalinnat</h2>
    <div class="grid">
      <!-- Task 1: tiheys -->
      <div class="card task-card" data-task-id="1">
        <h2>Tehtävä 1 – tiheys</h2>
        <div class="formula-symbolic math">
          \( \rho = \dfrac{m}{V} \)
        </div>
        <div class="relationship">
          Lähtötilanne: \(m = 100\,\text{g}\), \(V = 100\,\text{mL}\).  
          Sitten massa kasvatetaan \(m = 200\,\text{g}\), tilavuus pysyy.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Tiheys puolittuu</button>
          <button class="task-option" data-option="b">Tiheys pysyy samana</button>
          <button class="task-option" data-option="c">Tiheys kaksinkertaistuu</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 2: Boyle -->
      <div class="card task-card" data-task-id="2">
        <h2>Tehtävä 2 – Boylen laki</h2>
        <div class="formula-symbolic math">
          \( p_1 V_1 = p_2 V_2 \)
        </div>
        <div class="relationship">
          \(p_1 = 100\,\text{kPa}\), \(V_1 = 4.0\,\text{L}\).  
          Tilavuus puristetaan \(V_2 = 2.0\,\text{L}\) (T ja n vakio).
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Paine pienenee puoleen</button>
          <button class="task-option" data-option="b">Paine pysyy samana</button>
          <button class="task-option" data-option="c">Paine kaksinkertaistuu</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 3: harmoninen värähtelijä -->
      <div class="card task-card" data-task-id="3">
        <h2>Tehtävä 3 – harmoninen värähtelijä</h2>
        <div class="formula-symbolic math">
          \( T = 2\pi \sqrt{\dfrac{m}{k}} \)
        </div>
        <div class="relationship">
          \(m\) nelinkertaistuu (1.0 → 4.0 kg), \(k\) pysyy samana.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">T nelinkertaistuu</button>
          <button class="task-option" data-option="b">T kaksinkertaistuu</button>
          <button class="task-option" data-option="c">T pysyy samana</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 4: pH vahva happo -->
      <div class="card task-card" data-task-id="4">
        <h2>Tehtävä 4 – pH vahvalla hapolla</h2>
        <div class="formula-symbolic math">
          \( \mathrm{pH} = -\log_{10}[\mathrm{H_3O^+}] \)
        </div>
        <div class="relationship">
          Pitoisuus muuttuu \(10^{-3} \rightarrow 10^{-5}\,\text{mol/L}\).
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Liuos muuttuu happamammaksi (pH pienenee)</button>
          <button class="task-option" data-option="b">Liuos muuttuu emäksisemmäksi (pH kasvaa)</button>
          <button class="task-option" data-option="c">pH pysyy lähes samana</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 5: pH vahva emäs -->
      <div class="card task-card" data-task-id="5">
        <h2>Tehtävä 5 – pH vahvalla emäksellä</h2>
        <div class="formula-symbolic math">
          \( \mathrm{pOH} = -\log_{10}[\mathrm{OH^-}],\ \mathrm{pH}=14-\mathrm{pOH} \)
        </div>
        <div class="relationship">
          [OH⁻] muuttuu \(10^{-2} \rightarrow 10^{-3}\,\text{mol/L}\).
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">pH kasvaa yhdellä yksiköllä</button>
          <button class="task-option" data-option="b">pH pienenee yhdellä yksiköllä</button>
          <button class="task-option" data-option="c">pH ei muutu</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 6: keskinopeus -->
      <div class="card task-card" data-task-id="6">
        <h2>Tehtävä 6 – keskinopeus</h2>
        <div class="formula-symbolic math">
          \( v = \dfrac{s}{t} \)
        </div>
        <div class="relationship">
          Matka kaksinkertaistuu ja aika kolminkertaistuu.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">v kaksinkertaistuu</button>
          <button class="task-option" data-option="b">v pienenee kolmasosaan</button>
          <button class="task-option" data-option="c">v on 2/3 alkuperäisestä</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 7: entalpia -->
      <div class="card task-card" data-task-id="7">
        <h2>Tehtävä 7 – reaktion entalpia</h2>
        <div class="formula-symbolic math">
          \( \Delta H = n\,\Delta H_\mathrm{m} \)
        </div>
        <div class="relationship">
          Eksoterminen reaktio: \(\Delta H_\mathrm{m} = -200\,\text{kJ/mol}\).  
          Ainemäärä suurennetaan 1 → 3 mol.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Reaktion vapauttama energia on -200 kJ</button>
          <button class="task-option" data-option="b">Reaktion vapauttama energia on -600 kJ</button>
          <button class="task-option" data-option="c">Reaktion vapauttama energia on +600 kJ</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 8: tasapainovakio -->
      <div class="card task-card" data-task-id="8">
        <h2>Tehtävä 8 – tasapainon siirtyminen</h2>
        <div class="formula-symbolic math">
          \( K = 2.0,\quad Q = \dfrac{[\mathrm{B}]}{[\mathrm{A}]} \)
        </div>
        <div class="relationship">
          Aluksi [A] = 1.0, [B] = 1.0 → Q = 1.0.  
          Sitten lisätään B:tä: [B] = 3.0, [A] ennallaan.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Systeemi siirtyy kohti tuotteita (oikealle)</button>
          <button class="task-option" data-option="b">Systeemi siirtyy kohti lähtöaineita (vasemmalle)</button>
          <button class="task-option" data-option="c">Systeemi on tasapainossa</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 9: liike-energia vertaileva -->
      <div class="card task-card" data-task-id="9">
        <h2>Tehtävä 9 – liike-energian vertailu</h2>
        <div class="formula-symbolic math">
          \( E_k = \dfrac{1}{2} m v^2 \)
        </div>
        <div class="relationship">
          Vaihtoehto A: massa kaksinkertaistuu.  
          Vaihtoehto B: nopeus kaksinkertaistuu.  
          Muut suureet vakioita.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">
            Massa kaksinkertaistuu → \(E_k\) kasvaa eniten
          </button>
          <button class="task-option" data-option="b">
            Nopeus kaksinkertaistuu → \(E_k\) kasvaa eniten
          </button>
          <button class="task-option" data-option="c">
            Molemmissa tapauksissa \(E_k\) kasvaa yhtä paljon
          </button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>

      <!-- Task 10: ideaalikaasu p = nRT/V -->
      <div class="card task-card" data-task-id="10">
        <h2>Tehtävä 10 – ideaalikaasun paine</h2>
        <div class="formula-symbolic math">
          \( p = \dfrac{nRT}{V} \)
        </div>
        <div class="relationship">
          Tilavuus ja T vakioita.  
          Ainemäärä kasvaa 1 mol → 3 mol.
        </div>
        <div class="task-options">
          <button class="task-option" data-option="a">Paine kolminkertaistuu</button>
          <button class="task-option" data-option="b">Paine kasvaa neliöjuuren verran</button>
          <button class="task-option" data-option="c">Paine ei muutu</button>
        </div>
        <button class="task-show">Näytä vastaus</button>
        <div class="task-feedback"></div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
